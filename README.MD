# üìÑ Proyecto SQL ‚Äì Consultas, Triggers y Eventos

Este proyecto contiene ejemplos de **consultas SQL avanzadas**, **triggers** y **eventos programados** implementados sobre una base de datos de ventas musicales. El objetivo es cubrir casos de negocio comunes como auditor√≠as, actualizaciones autom√°ticas, reportes y validaciones.

---

## üìä Consultas SQL

1. **Cliente con la compra m√°s cara en el √∫ltimo a√±o**  
   Consulta para obtener el cliente que ha realizado la compra de mayor valor en el √∫ltimo a√±o.

2. **Cinco √°lbumes con m√°s canciones vendidas en los √∫ltimos tres meses**  
   Consulta para listar los 5 √°lbumes con mayor n√∫mero de canciones vendidas en el √∫ltimo trimestre.

3. **Cantidad de canciones vendidas por cada g√©nero en el √∫ltimo mes**  
   Consulta para mostrar el total de canciones vendidas agrupadas por g√©nero musical en el √∫ltimo mes.

4. **Clientes que no han comprado en el √∫ltimo a√±o**  
   Consulta que identifica a los clientes inactivos en el √∫ltimo a√±o.

---

## ‚öôÔ∏è Triggers SQL

1. **ActualizarTotalVentasEmpleado**  
   Actualiza autom√°ticamente el total de ventas acumuladas por un empleado al registrarse una nueva venta.

2. **AuditarActualizacionCliente**  
   Registra autom√°ticamente cada modificaci√≥n realizada sobre un cliente en una tabla de auditor√≠a.

3. **RegistrarHistorialPrecioCancion**  
   Guarda un registro hist√≥rico de los cambios de precio en las canciones.

4. **NotificarCancelacionVenta**  
   Inserta una notificaci√≥n cuando se elimina una venta.

5. **RestringirCompraConSaldoDeudor**  
   Impide que un cliente con saldo deudor realice nuevas compras.

> **Nota:** Estos triggers se implementaron sin usar tablas auxiliares adicionales.

---

## ‚è≥ Eventos SQL

1. **ReporteVentasMensual**  
   Genera autom√°ticamente un reporte mensual de ventas y lo almacena.

2. **ActualizarSaldosCliente**  
   Actualiza los saldos de cuenta de los clientes al final de cada mes.

3. **AlertaAlbumNoVendidoAnual**  
   Env√≠a una alerta cuando un √°lbum no registra ventas en los √∫ltimos 12 meses.

4. **LimpiarAuditoriaCada6Meses**  
   Borra registros antiguos de auditor√≠a cada 6 meses para optimizar el almacenamiento.

5. **ActualizarListaDeGenerosPopulares**  
   Actualiza la lista de g√©neros musicales m√°s vendidos al final de cada mes.

---

## üõ†Ô∏è Requisitos

- **Motor de base de datos:** MySQL 8.0 o superior  
- **Base de datos** con tablas relacionadas a clientes, ventas, canciones, g√©neros, √°lbumes y empleados.  
- **Permisos** para crear y administrar eventos (`EVENT`), y para crear triggers.

---

## üöÄ Ejecuci√≥n

1. Aseg√∫rate de habilitar el programador de eventos en MySQL:
   ```sql
   SET GLOBAL event_scheduler = ON;